import{o as f,E as d,u as p}from"./CBsAYBMq.js";const r=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",v=r.includes("safari")&&!r.includes("chrom");v&&(r.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(r));const I=r.includes("webkit")&&!r.includes("edge"),R=r.includes("macintosh"),A=typeof devicePixelRatio<"u"?devicePixelRatio:1,E=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,u=typeof Image<"u"&&Image.prototype.decode,L=function(){let e=!1;try{const n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch{}return e}();function C(e,n,o,s){let t;return o&&o.length?t=o.shift():E?t=new OffscreenCanvas(e||300,n||300):t=document.createElement("canvas"),e&&(t.width=e),n&&(t.height=n),t.getContext("2d",s)}let a;function m(){return a||(a=C(1,1)),a}function O(e){const n=e.canvas;n.width=1,n.height=1,e.clearRect(0,0,1,1)}function S(e,n){const o=n.parentNode;o&&o.replaceChild(e,n)}function _(e){for(;e.lastChild;)e.lastChild.remove()}function b(e,n){const o=e.childNodes;for(let s=0;;++s){const t=o[s],i=n[s];if(!t&&!i)break;if(t!==i){if(!t){e.appendChild(i);continue}if(!i){e.removeChild(t),--s;continue}e.insertBefore(i,t)}}}function g(e,n,o){const s=e;let t=!0,i=!1,c=!1;const l=[f(s,d.LOAD,function(){c=!0,i||n()})];return s.src&&u?(i=!0,s.decode().then(function(){t&&n()}).catch(function(h){t&&(c?n():o())})):l.push(f(s,d.ERROR,o)),function(){t=!1,l.forEach(p)}}function w(e,n){return new Promise((o,s)=>{function t(){c(),o(e)}function i(){c(),s(new Error("Image load error"))}function c(){e.removeEventListener("load",t),e.removeEventListener("error",i)}e.addEventListener("load",t),e.addEventListener("error",i)})}function x(e,n){return n&&(e.src=n),e.src&&u?new Promise((o,s)=>e.decode().then(()=>o(e)).catch(t=>e.complete&&e.width?o(e):s(t))):w(e)}export{A as D,R as M,L as P,I as W,S as a,b,C as c,O as d,E as e,x as f,m as g,g as l,_ as r};
