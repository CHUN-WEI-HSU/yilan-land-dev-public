import{f as c,A as T,r as m,B as I,C as _,c as B,b as e,w as l,d,E as y,t as S,G as U,D,o as E}from"./X6HiR9a0.js";import{u as M}from"./C2tWarCO.js";import{a as P,b as R,V as j}from"./CDWtWOpw.js";import{V as f}from"./CGimk7xp.js";import{V as q,a as A}from"./BLdD__-5.js";import{V as F}from"./DDsi7qit.js";import{V as k,a as u}from"./Cmx4BhuN.js";import{V as N}from"./DzK2Vaqa.js";import{V as O}from"./Dt6UcgE2.js";import"./QTtvbP9O.js";import"./DKX_newj.js";import"./CPQ6r5fr.js";import"./BY2OCKJV.js";import"./C8wLsuJq.js";import"./DLtwXl82.js";import"./D8k_Q558.js";import"./DhWIIRAe.js";const re={__name:"[action]",setup($){const x=T(),i=D(),{showSuccess:w}=M(),b=c(()=>x.params.id),n=c(()=>!!b.value),p=m(!1),s=m(!1),V=m(null),g=[{text:"啟用",value:!0},{text:"停用",value:!1}],v={employeeId:[a=>!!a||"請輸入員工編號",a=>a&&a.length<=20||"員工編號不可超過20個字元"],remark:[a=>!!a||"請輸入備註內容"]},r=I({employeeId:"",remark:"",status:!0}),C=async()=>{if(V.value.validate()){s.value=!0;try{await new Promise(a=>setTimeout(a,500)),w(n.value?"成功更新權限資料":"成功新增權限資料"),i.push("/admin/permissions")}catch(a){console.error("儲存失敗",a)}finally{s.value=!1}}};return _(async()=>{if(n.value){s.value=!0;try{await new Promise(a=>setTimeout(a,300)),Object.assign(r,{employeeId:"A001",remark:"系統管理員權限",status:!0})}catch(a){console.error("獲取資料失敗",a)}finally{s.value=!1}}}),(a,t)=>(E(),B("div",null,[e(j,null,{default:l(()=>[e(P,{class:"d-flex align-center"},{default:l(()=>[e(f,{icon:"mdi-arrow-left",variant:"text",class:"mr-2",onClick:t[0]||(t[0]=o=>y(i).back())}),d(" "+S(n.value?"編輯權限":"新增權限"),1)]),_:1}),e(R,null,{default:l(()=>[e(q,{ref_key:"form",ref:V,modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=o=>p.value=o),onSubmit:U(C,["prevent"])},{default:l(()=>[e(F,null,{default:l(()=>[e(k,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(N,{modelValue:r.employeeId,"onUpdate:modelValue":t[1]||(t[1]=o=>r.employeeId=o),rules:v.employeeId,label:"員工編號",required:"",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(O,{modelValue:r.status,"onUpdate:modelValue":t[2]||(t[2]=o=>r.status=o),items:g,"item-title":"text","item-value":"value",label:"狀態",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(A,{modelValue:r.remark,"onUpdate:modelValue":t[3]||(t[3]=o=>r.remark=o),rules:v.remark,label:"備註",required:"",variant:"outlined",rows:"3"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(k,null,{default:l(()=>[e(u,{cols:"12",class:"d-flex justify-end"},{default:l(()=>[e(f,{variant:"outlined",color:"grey",class:"mr-2",onClick:t[4]||(t[4]=o=>y(i).back())},{default:l(()=>t[6]||(t[6]=[d(" 取消 ")])),_:1}),e(f,{color:"primary",type:"submit",loading:s.value},{default:l(()=>t[7]||(t[7]=[d(" 儲存 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}};export{re as default};
