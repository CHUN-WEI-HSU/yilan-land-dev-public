import{_ as ne,i as me,f as S,e as oe,o as le,w as v,b as i,a as T,d as W,A as z,t as fe,a9 as he,G as D,$ as ge,h as F,U as N,aa as ie,an as ye,ao as $,W as we,B as pe,ap as be,m as _e,p as ke,N as Ve,s as xe,O as Se,n as Te,r as X,q as O,aq as Ce,Q as Be,ar as Ee,F as Me,z as Pe,a5 as De,T as Ie,k as He,as as Re}from"./D7mpKE92.js";import{useAdminAuthStore as re}from"./6hRyFsxc.js";import{V as se}from"./C-NydD0m.js";import{V as ue}from"./ZBLjeBBo.js";import{e as Ne,f as q,V as B,g as K,u as Ae,h as Le,a as Ye,c as $e}from"./B1nbOOus.js";import{V as Y,e as ee,d as We,m as Oe,c as ze}from"./BmNxzNe3.js";import{n as Xe,p as qe,b as Fe,f as Ue,x as je,y as Ze,t as Ge,V as Qe,g as Je,j as Ke,o as et}from"./C6TErlTq.js";import{V as tt}from"./CoTG0Fgh.js";import{_ as at,V as nt}from"./Css5n5cb.js";import{u as ot,m as lt,V as it}from"./CDAinT3t.js";import{u as rt}from"./C84G2iSU.js";import"./vU-ZaTOM.js";const st={class:"d-flex align-center"},ut={class:"d-flex align-center"},ct={class:"text-white"},dt={__name:"AdminHeader",setup(e){const u=me(),n=re(),f=S(()=>n.adminData),t=()=>{u.push("/admin/change-password")},o=async()=>{try{const{$swal:a}=he();(await a.fire({title:"確認登出",text:"您確定要登出系統嗎？",icon:"question",showCancelButton:!0,confirmButtonText:"確定登出",cancelButtonText:"取消"})).isConfirmed&&(await n.logout(),await a.fire({icon:"success",title:"登出成功",text:"您已成功登出系統",timer:1500,showConfirmButton:!1}),u.push("/admin/login"))}catch(a){console.error("登出失敗:",a),n.clearToken(),u.push("/admin/login")}};return(a,l)=>(le(),oe(tt,{flat:"",color:"primary"},{default:v(()=>[i(se,{fluid:"",class:"d-flex align-center justify-space-between"},{default:v(()=>[T("div",st,[l[1]||(l[1]=T("div",{class:"text-white font-weight-bold text-h6 d-none d-sm-flex"}," 宜蘭縣政府地政處 ",-1)),i(ue,{color:"white",variant:"text",class:"mr-auto","prepend-icon":"mdi-arrow-left",href:"/",title:"返回前台"},{default:v(()=>l[0]||(l[0]=[W(" 返回前台 ")])),_:1})]),T("div",ut,[i(Ne,{transition:"slide-y-transition"},{activator:v(({props:k})=>{var h;return[T("div",z({class:"d-flex align-center"},k),[i(Xe,{color:"white",size:"36",class:"mr-2"},{default:v(()=>[i(Y,{icon:"mdi-account",color:"primary"})]),_:1}),T("div",ct,fe(((h=f.value)==null?void 0:h.name)||"管理員"),1),i(Y,{icon:"mdi-chevron-down",color:"white",size:"small",class:"ml-1"})],16)]}),default:v(()=>[i(q,null,{default:v(()=>[i(B,{onClick:t},{prepend:v(()=>[i(Y,{icon:"mdi-key"})]),default:v(()=>[i(K,null,{default:v(()=>l[2]||(l[2]=[W("修改密碼")])),_:1})]),_:1}),i(B,{onClick:o},{prepend:v(()=>[i(Y,{icon:"mdi-logout"})]),default:v(()=>[i(K,null,{default:v(()=>l[3]||(l[3]=[W("登出")])),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}))}},vt=ne(dt,[["__scopeId","data-v-13ce4f05"]]);function mt(e){let{rootEl:u,isSticky:n,layoutItemStyles:f}=e;const t=D(!1),o=D(0),a=S(()=>{const h=typeof t.value=="boolean"?"top":t.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[h]:ge(o.value)}:{top:f.value.top}]});F(()=>{N(n,h=>{h?window.addEventListener("scroll",k,{passive:!0}):window.removeEventListener("scroll",k)},{immediate:!0})}),ie(()=>{window.removeEventListener("scroll",k)});let l=0;function k(){const h=l>window.scrollY?"up":"down",g=u.value.getBoundingClientRect(),y=parseFloat(f.value.top??0),m=window.scrollY-Math.max(0,o.value-y),w=g.height+Math.max(o.value,y)-window.scrollY-window.innerHeight,_=parseFloat(getComputedStyle(u.value).getPropertyValue("--v-body-scroll-y"))||0;g.height<window.innerHeight-y?(t.value="top",o.value=y):h==="up"&&t.value==="bottom"||h==="down"&&t.value==="top"?(o.value=window.scrollY+g.top-_,t.value=!0):h==="down"&&w<=0?(o.value=0,t.value="bottom"):h==="up"&&m<=0&&(_?t.value!=="top"&&(o.value=-m+_+y,t.value="top"):(o.value=g.top+m,t.value="top")),l=window.scrollY}return{isStuck:t,stickyStyles:a}}const ft=100,ht=20;function te(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function ae(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let u=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const f=te(u),t=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);u+=(t-f)*Math.abs(t),n===e.length-1&&(u*=.5)}return te(u)*1e3}function gt(){const e={};function u(t){Array.from(t.changedTouches).forEach(o=>{(e[o.identifier]??(e[o.identifier]=new ye(ht))).push([t.timeStamp,o])})}function n(t){Array.from(t.changedTouches).forEach(o=>{delete e[o.identifier]})}function f(t){var h;const o=(h=e[t])==null?void 0:h.values().reverse();if(!o)throw new Error(`No samples for touch id ${t}`);const a=o[0],l=[],k=[];for(const g of o){if(a[0]-g[0]>ft)break;l.push({t:g[0],d:g[1].clientX}),k.push({t:g[0],d:g[1].clientY})}return{x:ae(l),y:ae(k),get direction(){const{x:g,y}=this,[m,w]=[Math.abs(g),Math.abs(y)];return m>w&&g>=0?"right":m>w&&g<=0?"left":w>m&&y>=0?"down":w>m&&y<=0?"up":yt()}}}return{addMovement:u,endTouch:n,getVelocity:f}}function yt(){throw new Error}function wt(e){let{el:u,isActive:n,isTemporary:f,width:t,touchless:o,position:a}=e;F(()=>{window.addEventListener("touchstart",E,{passive:!0}),window.addEventListener("touchmove",C,{passive:!1}),window.addEventListener("touchend",A,{passive:!0})}),ie(()=>{window.removeEventListener("touchstart",E),window.removeEventListener("touchmove",C),window.removeEventListener("touchend",A)});const l=S(()=>["left","right"].includes(a.value)),{addMovement:k,endTouch:h,getVelocity:g}=gt();let y=!1;const m=D(!1),w=D(0),_=D(0);let x;function I(r,s){return(a.value==="left"?r:a.value==="right"?document.documentElement.clientWidth-r:a.value==="top"?r:a.value==="bottom"?document.documentElement.clientHeight-r:P())-(s?t.value:0)}function H(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const c=a.value==="left"?(r-_.value)/t.value:a.value==="right"?(document.documentElement.clientWidth-r-_.value)/t.value:a.value==="top"?(r-_.value)/t.value:a.value==="bottom"?(document.documentElement.clientHeight-r-_.value)/t.value:P();return s?we(c):c}function E(r){if(o.value)return;const s=r.changedTouches[0].clientX,c=r.changedTouches[0].clientY,d=25,p=a.value==="left"?s<d:a.value==="right"?s>document.documentElement.clientWidth-d:a.value==="top"?c<d:a.value==="bottom"?c>document.documentElement.clientHeight-d:P(),b=n.value&&(a.value==="left"?s<t.value:a.value==="right"?s>document.documentElement.clientWidth-t.value:a.value==="top"?c<t.value:a.value==="bottom"?c>document.documentElement.clientHeight-t.value:P());(p||b||n.value&&f.value)&&(x=[s,c],_.value=I(l.value?s:c,n.value),w.value=H(l.value?s:c),y=_.value>-20&&_.value<80,h(r),k(r))}function C(r){const s=r.changedTouches[0].clientX,c=r.changedTouches[0].clientY;if(y){if(!r.cancelable){y=!1;return}const p=Math.abs(s-x[0]),b=Math.abs(c-x[1]);(l.value?p>b&&p>3:b>p&&b>3)?(m.value=!0,y=!1):(l.value?b:p)>3&&(y=!1)}if(!m.value)return;r.preventDefault(),k(r);const d=H(l.value?s:c,!1);w.value=Math.max(0,Math.min(1,d)),d>1?_.value=I(l.value?s:c,!0):d<0&&(_.value=I(l.value?s:c,!1))}function A(r){if(y=!1,!m.value)return;k(r),m.value=!1;const s=g(r.changedTouches[0].identifier),c=Math.abs(s.x),d=Math.abs(s.y);(l.value?c>d&&c>400:d>c&&d>3)?n.value=s.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||P()):n.value=w.value>.5}const R=S(()=>m.value?{transform:a.value==="left"?`translateX(calc(-100% + ${w.value*t.value}px))`:a.value==="right"?`translateX(calc(100% - ${w.value*t.value}px))`:a.value==="top"?`translateY(calc(-100% + ${w.value*t.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${w.value*t.value}px))`:P(),transition:"none"}:void 0);return $(m,()=>{var c,d;const r=((c=u.value)==null?void 0:c.style.transform)??null,s=((d=u.value)==null?void 0:d.style.transition)??null;pe(()=>{var p,b,M,L;(b=u.value)==null||b.style.setProperty("transform",((p=R.value)==null?void 0:p.transform)||"none"),(L=u.value)==null||L.style.setProperty("transition",((M=R.value)==null?void 0:M.transition)||null)}),be(()=>{var p,b;(p=u.value)==null||p.style.setProperty("transform",r),(b=u.value)==null||b.style.setProperty("transition",s)})}),{isDragging:m,dragProgress:w,dragStyles:R}}function P(){throw new Error}const pt=["start","end","left","right","top","bottom"],bt=ke({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>pt.includes(e)},sticky:Boolean,...et(),...ze(),...Ye(),...De({mobile:null}),...Ke(),...lt(),...Je(),...Oe({tag:"nav"}),...Pe()},"VNavigationDrawer"),_t=_e()({name:"VNavigationDrawer",props:bt(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,u){let{attrs:n,emit:f,slots:t}=u;const{isRtl:o}=Ve(),{themeClasses:a}=xe(e),{borderClasses:l}=qe(e),{backgroundColorClasses:k,backgroundColorStyles:h}=ee(()=>e.color),{elevationClasses:g}=Fe(e),{displayClasses:y,mobile:m}=Se(e),{roundedClasses:w}=Ue(e),_=je(),x=Te(e,"modelValue",null,V=>!!V),{ssrBootStyles:I}=rt(),{scopeId:H}=Ae(),E=X(),C=D(!1),{runOpenDelay:A,runCloseDelay:R}=Le(e,V=>{C.value=V}),r=S(()=>e.rail&&e.expandOnHover&&C.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),s=S(()=>Ze(e.location,o.value)),c=O(()=>e.persistent),d=S(()=>!e.permanent&&(m.value||e.temporary)),p=S(()=>e.sticky&&!d.value&&s.value!=="bottom");$(()=>e.expandOnHover&&e.rail!=null,()=>{N(C,V=>f("update:rail",!V))}),$(()=>!e.disableResizeWatcher,()=>{N(d,V=>!e.permanent&&Ie(()=>x.value=!V))}),$(()=>!e.disableRouteWatcher&&!!_,()=>{N(_.currentRoute,()=>d.value&&(x.value=!1))}),N(()=>e.permanent,V=>{V&&(x.value=!0)}),e.modelValue==null&&!d.value&&(x.value=e.permanent||!m.value);const{isDragging:b,dragProgress:M}=wt({el:E,isActive:x,isTemporary:d,width:r,touchless:O(()=>e.touchless),position:s}),L=S(()=>{const V=d.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):r.value;return b.value?V*M.value:V}),{layoutItemStyles:U,layoutItemScrimStyles:ce}=ot({id:e.name,order:S(()=>parseInt(e.order,10)),position:s,layoutSize:L,elementSize:r,active:Ce(x),disableTransitions:O(()=>b.value),absolute:S(()=>e.absolute||p.value&&typeof j.value!="string")}),{isStuck:j,stickyStyles:de}=mt({rootEl:E,isSticky:p,layoutItemStyles:U}),Z=ee(()=>typeof e.scrim=="string"?e.scrim:null),ve=S(()=>({...b.value?{opacity:M.value*.2,transition:"none"}:void 0,...ce.value}));return Be({VList:{bgColor:"transparent"}}),We(()=>{const V=t.image||e.image;return T(Me,null,[i(e.tag,z({ref:E,onMouseenter:A,onMouseleave:R,class:["v-navigation-drawer",`v-navigation-drawer--${s.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":C.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":d.value,"v-navigation-drawer--persistent":c.value,"v-navigation-drawer--active":x.value,"v-navigation-drawer--sticky":p.value},a.value,k.value,l.value,y.value,g.value,w.value,e.class],style:[h.value,U.value,I.value,de.value,e.style]},H,n),{default:()=>{var G,Q,J;return[V&&T("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?i(Qe,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):i(Ge,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&T("div",{class:"v-navigation-drawer__prepend"},[(G=t.prepend)==null?void 0:G.call(t)]),T("div",{class:"v-navigation-drawer__content"},[(Q=t.default)==null?void 0:Q.call(t)]),t.append&&T("div",{class:"v-navigation-drawer__append"},[(J=t.append)==null?void 0:J.call(t)])]}}),i(Ee,{name:"fade-transition"},{default:()=>[d.value&&(b.value||x.value)&&!!e.scrim&&T("div",z({class:["v-navigation-drawer__scrim",Z.backgroundColorClasses.value],style:[ve.value,Z.backgroundColorStyles.value],onClick:()=>{c.value||(x.value=!1)}},H),null)]})])}),{isStuck:j}}}),kt={__name:"admin",setup(e){const u=X(!0),n=X(!1),f=re();return F(()=>{f.initFromStorage(),f.jwtToken&&!f.adminData&&f.refreshUserInfo().catch(t=>{console.error("刷新用戶資訊失敗:",t),f.clearToken()})}),(t,o)=>{const a=vt;return le(),oe(nt,null,{default:v(()=>[i(a),i(_t,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=l=>u.value=l),rail:n.value,permanent:"",width:280,onClick:o[2]||(o[2]=l=>n.value=!1)},{default:v(()=>[i(q,null,{default:v(()=>[i(B,{"prepend-avatar":at,title:n.value?"":"土地開發後台管理"},{append:v(()=>[i(ue,{variant:"text",icon:"mdi-chevron-left",onClick:o[0]||(o[0]=He(l=>n.value=!n.value,["stop"]))})]),_:1},8,["title"])]),_:1}),i($e),i(q,{density:"compact",nav:""},{default:v(()=>[i(B,{to:"/admin","prepend-icon":"mdi-home",title:"首頁"}),i(B,{to:"/admin/admin-users","prepend-icon":"mdi-account-key",title:"帳號管理"}),i(B,{to:"/admin/land-dev","prepend-icon":"mdi-map",title:"土地開發區管理"}),i(B,{to:"/admin/parameters","prepend-icon":"mdi-cog",title:"參數管理"})]),_:1})]),_:1},8,["modelValue","rail"]),i(it,null,{default:v(()=>[i(se,{fluid:""},{default:v(()=>[Re(t.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3})}}},Rt=ne(kt,[["__scopeId","data-v-1be95760"]]);export{Rt as default};
