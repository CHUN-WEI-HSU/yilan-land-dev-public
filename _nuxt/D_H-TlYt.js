import{B as o}from"./sIom5plQ.js";import{B as u}from"./DlQCJ7AR.js";const i={ADD:"add",REMOVE:"remove"},n={LENGTH:"length"};class h extends u{constructor(t,e,r){super(t),this.element=e,this.index=r}}class _ extends o{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let r=0,s=this.array_.length;r<s;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,r=t.length;e<r;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let r=0,s=e.length;r<s;++r)t(e[r],r,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(n.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new h(i.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let r=0,s=e.length;r<s;++r)if(e[r]===t)return this.removeAt(r)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new h(i.REMOVE,e,t)),e}setAt(t,e){const r=this.getLength();if(t>=r){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const s=this.array_[t];this.array_[t]=e,this.dispatchEvent(new h(i.REMOVE,s,t)),this.dispatchEvent(new h(i.ADD,e,t))}updateLength_(){this.set(n.LENGTH,this.array_.length)}assertUnique_(t,e){for(let r=0,s=this.array_.length;r<s;++r)if(this.array_[r]===t&&r!==e)throw new Error("Duplicate item added to a unique collection")}}export{_ as C,i as a};
