import{T as v,E as c,l as h,o,u as l,g as _,h as f,B as g}from"./CBsAYBMq.js";const p={PROPERTYCHANGE:"propertychange"};class a extends v{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(c.CHANGE)}getRevision(){return this.revision_}onInternal(e,s){if(Array.isArray(e)){const t=e.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=h(this,e[i],s);return n}return h(this,e,s)}onceInternal(e,s){let t;if(Array.isArray(e)){const n=e.length;t=new Array(n);for(let i=0;i<n;++i)t[i]=o(this,e[i],s)}else t=o(this,e,s);return s.ol_key=t,t}unInternal(e,s){const t=s.ol_key;if(t)E(t);else if(Array.isArray(e))for(let n=0,i=e.length;n<i;++n)this.removeEventListener(e[n],s);else this.removeEventListener(e,s)}}a.prototype.on;a.prototype.once;a.prototype.un;function E(r){if(Array.isArray(r))for(let e=0,s=r.length;e<s;++e)l(r[e]);else l(r)}class u extends g{constructor(e,s,t){super(e),this.key=s,this.oldValue=t}}class y extends a{constructor(e){super(),this.on,this.once,this.un,_(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let s;return this.values_&&this.values_.hasOwnProperty(e)&&(s=this.values_[e]),s}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,s){let t;t=`change:${e}`,this.hasListener(t)&&this.dispatchEvent(new u(t,e,s)),t=p.PROPERTYCHANGE,this.hasListener(t)&&this.dispatchEvent(new u(t,e,s))}addChangeListener(e,s){this.addEventListener(`change:${e}`,s)}removeChangeListener(e,s){this.removeEventListener(`change:${e}`,s)}set(e,s,t){const n=this.values_||(this.values_={});if(t)n[e]=s;else{const i=n[e];n[e]=s,i!==s&&this.notify(e,i)}}setProperties(e,s){for(const t in e)this.set(t,e[t],s)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,s){if(this.values_&&e in this.values_){const t=this.values_[e];delete this.values_[e],f(this.values_)&&(this.values_=null),s||this.notify(e,t)}}}export{y as B,p as O,a};
