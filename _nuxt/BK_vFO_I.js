import{f as c,u as I,r as n,g as U,h as q,c as S,b as l,w as t,i as _,o as j,d as p,j as w,t as B,k as M}from"./CtiptTIU.js";import{u as P}from"./CZo5CsfA.js";import{V as R,a as D,b as E,c as k,d as u}from"./B7bkZI78.js";import{V as f}from"./BBl5NXvx.js";import{V as F}from"./Bi8knA0y.js";import{V as N}from"./C8T3a-wt.js";import{V}from"./NwnemnFG.js";import{V as O}from"./C-Z_m-nC.js";import{V as $}from"./BqdUcUm8.js";import"./v5m7S0p5.js";import"./DIhnNZwz.js";import"./CgiVEhsX.js";import"./Bqg6UD3P.js";import"./BevvzU36.js";const ae={__name:"[action]",setup(A){const x=I(),m=_(),{showSuccess:b}=P(),g=c(()=>x.params.id),s=c(()=>!!g.value),v=n(!1),i=n(!1),y=n(null),C=[{text:"啟用",value:!0},{text:"停用",value:!1}],d={employeeId:[e=>!!e||"請輸入員工編號",e=>e&&e.length<=20||"員工編號不可超過20個字元"],email:[e=>!!e||"請輸入電子郵件",e=>/.+@.+\..+/.test(e)||"請輸入有效的電子郵件格式"],password:[e=>s.value?!0:!!e||"請輸入密碼",e=>!e||e.length>=6||"密碼至少需要6個字元"],remark:[e=>!!e||"請輸入備註內容"]},r=U({employeeId:"",email:"",password:"",remark:"",status:!0}),T=async()=>{if(y.value.validate()){i.value=!0;try{await new Promise(e=>setTimeout(e,500)),b(s.value?"成功更新帳號資料":"成功新增帳號資料"),m.push("/admin/admin-users")}catch(e){console.error("儲存失敗",e)}finally{i.value=!1}}};return q(async()=>{if(s.value){i.value=!0;try{await new Promise(e=>setTimeout(e,300)),Object.assign(r,{employeeId:"A001",email:"admin@example.com",remark:"系統管理員權限",status:!0})}catch(e){console.error("獲取資料失敗",e)}finally{i.value=!1}}}),(e,a)=>(j(),S("div",null,[l(R,null,{default:t(()=>[l(D,{class:"d-flex align-center"},{default:t(()=>[l(f,{icon:"mdi-arrow-left",variant:"text",class:"mr-2",onClick:a[0]||(a[0]=o=>w(m).back())}),p(" "+B(s.value?"編輯權限":"新增權限"),1)]),_:1}),l(E,null,{default:t(()=>[l(F,{ref_key:"form",ref:y,modelValue:v.value,"onUpdate:modelValue":a[7]||(a[7]=o=>v.value=o),onSubmit:M(T,["prevent"])},{default:t(()=>[l(N,null,{default:t(()=>[l(k,null,{default:t(()=>[l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:r.employeeId,"onUpdate:modelValue":a[1]||(a[1]=o=>r.employeeId=o),rules:d.employeeId,label:"員工編號",required:"",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:r.email,"onUpdate:modelValue":a[2]||(a[2]=o=>r.email=o),rules:d.email,label:"電子郵件",type:"email",required:"",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:r.password,"onUpdate:modelValue":a[3]||(a[3]=o=>r.password=o),rules:d.password,label:"密碼",type:"password",required:!s.value,variant:"outlined",hint:s.value?"留空表示不修改密碼":"","persistent-hint":""},null,8,["modelValue","rules","required","hint"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(O,{modelValue:r.status,"onUpdate:modelValue":a[4]||(a[4]=o=>r.status=o),items:C,"item-title":"text","item-value":"value",label:"狀態",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l($,{modelValue:r.remark,"onUpdate:modelValue":a[5]||(a[5]=o=>r.remark=o),rules:d.remark,label:"備註",required:"",variant:"outlined",rows:"3"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(k,null,{default:t(()=>[l(u,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[l(f,{variant:"outlined",color:"grey",class:"mr-2",onClick:a[6]||(a[6]=o=>w(m).back())},{default:t(()=>a[8]||(a[8]=[p(" 取消 ")])),_:1}),l(f,{color:"primary",type:"submit",loading:i.value},{default:t(()=>a[9]||(a[9]=[p(" 儲存 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}};export{ae as default};
