import{_ as w,r as d,h as g,i as x,e as _,w as l,b as a,a as m,k as b,d as y,a9 as p,o as h}from"./CZWfS_om.js";import{_ as C,V as A}from"./ycZJAPAy.js";import{useAdminAuthStore as k}from"./DI61tr8b.js";import{V as B}from"./D2XjL67e.js";import{c as T,d as F,V as N,a as R,b as S}from"./CWrCp_3L.js";import{n as I,t as M}from"./Q8ask1Cb.js";import{V as $}from"./BbOcSuUm.js";import{V as f}from"./CqvDWhPt.js";import{V as q}from"./D5-erQMg.js";import{V as z}from"./D1YM4D9r.js";import"./rewUZy5u.js";import"./KfaIYWM2.js";import"./DQRYaji9.js";const U={__name:"login",setup(j){const u=x(),i=k(),o=d({email:"",password:""}),s=d(!1),n=d(!1),c=[t=>!!t||"請輸入電子郵件",t=>/.+@.+\..+/.test(t)||"請輸入有效的電子郵件格式"],V=[t=>!!t||"請輸入密碼",t=>t.length>=6||"密碼至少需要 6 個字元"],v=async()=>{n.value=!0;try{await i.login(o.value.email,o.value.password);const{$swal:t}=p();await t.fire({icon:"success",title:"登入成功",text:"歡迎回到後台管理系統",timer:1500,showConfirmButton:!1}),await u.push("/admin")}catch(t){console.error("登入失敗:",t);const{$swal:e}=p();await e.fire({icon:"error",title:"登入失敗",text:"請檢查您的電子郵件和密碼",confirmButtonText:"確定"})}finally{n.value=!1}};return g(()=>{i.initFromStorage(),i.isAuthenticated&&u.push("/admin")}),(t,e)=>(h(),_(A,null,{default:l(()=>[a(z,null,{default:l(()=>[a(B,{fluid:"",class:"fill-height"},{default:l(()=>[a(T,{justify:"center",align:"center",class:"fill-height"},{default:l(()=>[a(F,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3"},{default:l(()=>[a(N,{class:"elevation-12 pa-4"},{default:l(()=>[a(R,{class:"text-center mb-4"},{default:l(()=>[a(I,{size:"64",class:"mb-4"},{default:l(()=>[a(M,{src:C})]),_:1}),e[3]||(e[3]=m("div",{class:"text-h5 font-weight-bold text-primary"}," 後台管理系統 ",-1)),e[4]||(e[4]=m("div",{class:"text-subtitle-1 text-grey-600"}," 宜蘭縣政府地政處 ",-1))]),_:1}),a(S,null,{default:l(()=>[a($,{onSubmit:b(v,["prevent"])},{default:l(()=>[a(f,{modelValue:o.value.email,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.email=r),label:"電子郵件",type:"email",variant:"outlined","prepend-inner-icon":"mdi-email",rules:c,required:"",class:"mb-3"},null,8,["modelValue"]),a(f,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.password=r),label:"密碼",type:s.value?"text":"password",variant:"outlined","prepend-inner-icon":"mdi-lock","append-inner-icon":s.value?"mdi-eye":"mdi-eye-off",rules:V,required:"",class:"mb-4","onClick:appendInner":e[2]||(e[2]=r=>s.value=!s.value)},null,8,["modelValue","type","append-inner-icon"]),a(q,{type:"submit",color:"primary",size:"large",block:"",loading:n.value,class:"mb-3"},{default:l(()=>e[5]||(e[5]=[y(" 登入 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Z=w(U,[["__scopeId","data-v-da6a032e"]]);export{Z as default};
