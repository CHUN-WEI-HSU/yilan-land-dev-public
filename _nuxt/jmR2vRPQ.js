import{c as M}from"./ejpV0U7u.js";import{c,t as N}from"./Ba_gg6Bw.js";const R=[NaN,NaN,NaN,0];let b;function w(){return b||(b=M(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),b}const I=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,A=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,E=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,L=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function d(t,n){return t.endsWith("%")?Number(t.substring(0,t.length-1))/n:Number(t)}function l(t){throw new Error('failed to parse "'+t+'" as color')}function C(t){if(t.toLowerCase().startsWith("rgb")){const s=t.match(A)||t.match(I)||t.match(E);if(s){const a=s[4],i=100/255;return[c(d(s[1],i)+.5|0,0,255),c(d(s[2],i)+.5|0,0,255),c(d(s[3],i)+.5|0,0,255),a!==void 0?c(d(a,100),0,1):1]}l(t)}if(t.startsWith("#")){if(L.test(t)){const s=t.substring(1),a=s.length<=4?1:2,i=[0,0,0,255];for(let o=0,g=s.length;o<g;o+=a){let h=parseInt(s.substring(o,o+a),16);a===1&&(h+=h<<4),i[o/a]=h}return i[3]=i[3]/255,i}l(t)}const n=w();n.fillStyle="#abcdef";let e=n.fillStyle;n.fillStyle=t,n.fillStyle===e&&(n.fillStyle="#fedcba",e=n.fillStyle,n.fillStyle=t,n.fillStyle===e&&l(t));const r=n.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return C(r);n.clearRect(0,0,1,1),n.fillRect(0,0,1,1);const f=Array.from(n.getImageData(0,0,1,1).data);return f[3]=N(f[3]/255,3),f}function $(t){return typeof t=="string"?t:P(t)}const D=1024,u={};let y=0;function q(t){if(t.length===4)return t;const n=t.slice();return n[3]=1,n}function m(t){return t>.0031308?Math.pow(t,1/2.4)*269.025-14.025:t*3294.6}function p(t){return t>.2068965?Math.pow(t,3):(t-4/29)*(108/841)}function S(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function x(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function z(t){const n=S(t[0]),e=S(t[1]),r=S(t[2]),f=x(n*.222488403+e*.716873169+r*.06060791),s=500*(x(n*.452247074+e*.399439023+r*.148375274)-f),a=200*(f-x(n*.016863605+e*.117638439+r*.865350722)),i=Math.atan2(a,s)*(180/Math.PI);return[116*f-16,Math.sqrt(s*s+a*a),i<0?i+360:i,t[3]]}function _(t){const n=(t[0]+16)/116,e=t[1],r=t[2]*Math.PI/180,f=p(n),s=p(n+e/500*Math.cos(r)),a=p(n-e/200*Math.sin(r)),i=m(s*3.021973625-f*1.617392459-a*.404875592),o=m(s*-.943766287+f*1.916279586+a*.027607165),g=m(s*.069407491-f*.22898585+a*1.159737864);return[c(i+.5|0,0,255),c(o+.5|0,0,255),c(g+.5|0,0,255),t[3]]}function O(t){if(t==="none")return R;if(u.hasOwnProperty(t))return u[t];if(y>=D){let e=0;for(const r in u)e++&3||(delete u[r],--y)}const n=C(t);n.length!==4&&l(t);for(const e of n)isNaN(e)&&l(t);return u[t]=n,++y,n}function k(t){return Array.isArray(t)?t:O(t)}function P(t){let n=t[0];n!=(n|0)&&(n=n+.5|0);let e=t[1];e!=(e|0)&&(e=e+.5|0);let r=t[2];r!=(r|0)&&(r=r+.5|0);const f=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+n+","+e+","+r+","+f+")"}const H={IDLE:0,LOADING:1,LOADED:2,ERROR:3};export{H as I,R as N,k as a,$ as b,O as f,_ as l,z as r,P as t,q as w};
