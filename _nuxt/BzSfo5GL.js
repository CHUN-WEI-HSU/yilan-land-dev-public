import{c as K,g as j,a as p}from"./DlQCJ7AR.js";import{t as Z,I as m,a as G}from"./jmR2vRPQ.js";import{c as S,e as U}from"./ejpV0U7u.js";import{s as L,g as V,I as Q,a as Y}from"./BDylbOZ5.js";import{B as X}from"./sIom5plQ.js";const me="ol-hidden",_e="ol-unselectable",ye="ol-control",De="ol-collapsed",ee=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),x=["style","variant","weight","size","lineHeight","family"],$=function(i){const e=i.match(ee);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let s=0,n=x.length;s<n;++s){const r=e[s+1];r!==void 0&&(t[x[s]]=r)}return t.families=t.family.split(/,\s?/),t};function H(i){return i?Array.isArray(i)?Z(i):typeof i=="object"&&"src"in i?te(i):i:null}function te(i){if(!i.offset||!i.size)return L.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=L.getPattern(e,void 0,i.color);if(t)return t;const s=L.get(i.src,"anonymous",null);if(s.getImageState()!==m.LOADED)return null;const n=S(i.size[0],i.size[1]);return n.drawImage(s.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),V(n.canvas,e,void 0,m.LOADED,i.color,!0),L.getPattern(e,void 0,i.color)}const Le="10px sans-serif",E="#000",T="round",Ce=[],Ie=0,J="round",ie=10,se="#000",Se="center",ke="middle",Ae=[0,0,0,0],ne=1,y=new X;let D=null,M;const v={},we=function(){const e="32px ",t=["monospace","serif"],s=t.length,n="wmytzilWMYTZIL@#/&?$%10";let r,o;function h(a,l,f){let c=!0;for(let d=0;d<s;++d){const g=t[d];if(o=k(a+" "+l+" "+e+g,n),f!=g){const _=k(a+" "+l+" "+e+f+","+g,n);c=c&&_!=o}}return!!c}function u(){let a=!0;const l=y.getKeys();for(let f=0,c=l.length;f<c;++f){const d=l[f];if(y.get(d)<100){const[g,_,C]=d.split(`
`);h(g,_,C)?(K(v),D=null,M=void 0,y.set(d,100)):(y.set(d,y.get(d)+1,!0),a=!1)}}a&&(clearInterval(r),r=void 0)}return function(a){const l=$(a);if(!l)return;const f=l.families;for(let c=0,d=f.length;c<d;++c){const g=f[c],_=l.style+`
`+l.weight+`
`+g;y.get(_)===void 0&&(y.set(_,100,!0),h(l.style,l.weight,g)||(y.set(_,0,!0),r===void 0&&(r=setInterval(u,32))))}}}(),re=function(){let i;return function(e){let t=v[e];if(t==null){if(U){const s=$(e),n=B(e,"Žg");t=(isNaN(Number(s.lineHeight))?1.2:Number(s.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);v[e]=t}return t}}();function B(i,e){return D||(D=S(1,1)),i!=M&&(D.font=i,M=D.font),D.measureText(e)}function k(i,e){return B(i,e).width}function ze(i,e,t){if(e in t)return t[e];const s=e.split(`
`).reduce((n,r)=>Math.max(n,k(i,r)),0);return t[e]=s,s}function Me(i,e){const t=[],s=[],n=[];let r=0,o=0,h=0,u=0;for(let a=0,l=e.length;a<=l;a+=2){const f=e[a];if(f===`
`||a===l){r=Math.max(r,o),n.push(o),o=0,h+=u,u=0;continue}const c=e[a+1]||i.font,d=k(c,f);t.push(d),o+=d;const g=re(c);s.push(g),u=Math.max(u,g)}return{width:r,height:h,widths:t,heights:s,lineWidths:n}}function ve(i,e,t,s,n,r,o,h,u,a,l){i.save(),t!==1&&(i.globalAlpha===void 0?i.globalAlpha=f=>f.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),s.contextInstructions?(i.translate(u,a),i.scale(l[0],l[1]),le(s,i)):l[0]<0||l[1]<0?(i.translate(u,a),i.scale(l[0],l[1]),i.drawImage(s,n,r,o,h,0,0,o,h)):i.drawImage(s,n,r,o,h,u,a,o*l[0],h*l[1]),i.restore()}function le(i,e){const t=i.contextInstructions;for(let s=0,n=t.length;s<n;s+=2)Array.isArray(t[s+1])?e[t[s]].apply(e,t[s+1]):e[t[s]]=t[s+1]}class F extends Q{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?m.LOADING:m.LOADED,this.imageState_===m.LOADING&&this.ready().then(()=>this.imageState_=m.LOADED),this.render()}clone(){const e=this.getScale(),t=new F({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),s=this.getScaleArray();return[e[0]/2-t[0]/s[0],e[1]/2+t[1]/s[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var r,o;const t=(r=this.fill_)==null?void 0:r.getKey(),s=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let n=(o=L.get(s,null,null))==null?void 0:o.getImage(1);if(!n){const h=this.renderOptions_,u=Math.ceil(h.size*e),a=S(u,u);this.draw_(h,a,e),n=a.canvas,L.set(s,null,null,new Y(n,void 0,null,m.LOADED,null))}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,s){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let n=this.radius,r=this.radius2_===void 0?n:this.radius2_;if(n<r){const w=n;n=r,r=w}const o=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/o,u=r*Math.sin(h),a=Math.sqrt(r*r-u*u),l=n-a,f=Math.sqrt(u*u+l*l),c=f/u;if(e==="miter"&&c<=s)return c*t;const d=t/2/c,g=t/2*(l/f),C=Math.sqrt((n+d)*(n+d)+g*g)-n;if(this.radius2_===void 0||e==="bevel")return C*2;const I=n*Math.sin(h),q=Math.sqrt(n*n-I*I),P=r-q,W=Math.sqrt(I*I+P*P)/I;if(W<=s){const w=W*t/2-r-n;return 2*Math.max(C,w)}return C*2}createRenderOptions(){let e=T,t=J,s=0,n=null,r=0,o,h=0;this.stroke_&&(o=H(this.stroke_.getColor()??se),h=this.stroke_.getWidth()??ne,n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??J,e=this.stroke_.getLineCap()??T,s=this.stroke_.getMiterLimit()??ie);const u=this.calculateLineJoinSize_(t,h,s),a=Math.max(this.radius,this.radius2_||0),l=Math.ceil(2*a+u);return{strokeStyle:o,strokeWidth:h,size:l,lineCap:e,lineDash:n,lineDashOffset:r,lineJoin:t,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,s){if(t.scale(s,s),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let n=this.fill_.getColor();n===null&&(n=E),t.fillStyle=H(n),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let s=this.fill_.getColor(),n=0;typeof s=="string"&&(s=G(s)),s===null?n=1:Array.isArray(s)&&(n=s.length===4?s[3]:1),n===0&&(t=S(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const s=this.radius;if(t===1/0)e.arc(0,0,s,0,2*Math.PI);else{const n=this.radius2_===void 0?s:this.radius2_;this.radius2_!==void 0&&(t*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let h=0;h<t;h++){const u=r+h*o,a=h%2===0?s:n;e.lineTo(a*Math.cos(u),a*Math.sin(u))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=E,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class R extends F{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new R({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class b{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new b({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=V(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===m.IDLE&&t.load(),t.getImageState()===m.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?j(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:G(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class O{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new O({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class A{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=N,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new A({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=N,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function ae(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(p(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let z=null;function he(i,e){if(!z){const t=new b({color:"rgba(255,255,255,0.4)"}),s=new O({color:"#3399CC",width:1.25});z=[new A({image:new R({fill:t,stroke:s,radius:5}),fill:t,stroke:s})]}return z}function N(i){return i.getGeometry()}const Fe=Object.freeze(Object.defineProperty({__proto__:null,createDefaultStyle:he,default:A,toFunction:ae},Symbol.toStringTag,{value:"Module"}));export{_e as C,b as F,F as R,A as S,ye as a,De as b,me as c,y as d,H as e,T as f,Ce as g,Ie as h,J as i,ne as j,ie as k,E as l,se as m,Ae as n,ke as o,Se as p,Le as q,we as r,Me as s,ve as t,ze as u,O as v,R as w,he as x,ae as y,Fe as z};
