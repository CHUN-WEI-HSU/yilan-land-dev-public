import{p as l,E as u,u as p}from"./DlQCJ7AR.js";const s=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",v=s.includes("safari")&&!s.includes("chrom");v&&(s.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(s));const w=s.includes("webkit")&&!s.includes("edge"),I=s.includes("macintosh"),R=typeof devicePixelRatio<"u"?devicePixelRatio:1,E=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,d=typeof Image<"u"&&Image.prototype.decode,L=function(){let e=!1;try{const n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch{}return e}();function C(e,n,t,r){let o;return t&&t.length?o=t.shift():E?o=new OffscreenCanvas(e||300,n||300):o=document.createElement("canvas"),e&&(o.width=e),n&&(o.height=n),o.getContext("2d",r)}let a;function S(){return a||(a=C(1,1)),a}function m(e){const n=e.canvas;n.width=1,n.height=1,e.clearRect(0,0,1,1)}function O(e,n){const t=n.parentNode;t&&t.replaceChild(e,n)}function _(e){for(;e.lastChild;)e.lastChild.remove()}function b(e,n){const t=e.childNodes;for(let r=0;;++r){const o=t[r],i=n[r];if(!o&&!i)break;if(o!==i){if(!o){e.appendChild(i);continue}if(!i){e.removeChild(o),--r;continue}e.insertBefore(i,o)}}}function g(e){return e[0]>0&&e[1]>0}function x(e,n,t){return t===void 0&&(t=[0,0]),t[0]=e[0]*n+.5|0,t[1]=e[1]*n+.5|0,t}function D(e,n){return Array.isArray(e)?e:(n===void 0?n=[e,e]:(n[0]=e,n[1]=e),n)}function k(e,n,t){const r=e;let o=!0,i=!1,c=!1;const f=[l(r,u.LOAD,function(){c=!0,i||n()})];return r.src&&d?(i=!0,r.decode().then(function(){o&&n()}).catch(function(h){o&&(c?n():t())})):f.push(l(r,u.ERROR,t)),function(){o=!1,f.forEach(p)}}function y(e,n){return new Promise((t,r)=>{function o(){c(),t(e)}function i(){c(),r(new Error("Image load error"))}function c(){e.removeEventListener("load",o),e.removeEventListener("error",i)}e.addEventListener("load",o),e.addEventListener("error",i)})}function N(e,n){return n&&(e.src=n),e.src&&d?new Promise((t,r)=>e.decode().then(()=>t(e)).catch(o=>e.complete&&e.width?t(e):r(o))):y(e)}export{R as D,I as M,L as P,w as W,O as a,b,C as c,m as d,E as e,N as f,S as g,g as h,k as l,_ as r,x as s,D as t};
